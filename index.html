<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Duckietown" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/13/Duckietown/" class="article-date">
  <time datetime="2020-07-13T11:00:52.000Z" itemprop="datePublished">2020-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/13/Duckietown/">Duckie town &amp; Container</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Singularity"><a href="#Singularity" class="headerlink" title="Singularity"></a>Singularity</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo singularity <span class="built_in">exec</span> --writable sandbox <span class="built_in">command</span></span><br><span class="line"><span class="comment"># --writable is critical, otherwise may even not work for apt-get</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conda should be installed both within container and outside, the conda environment is defined outside container, then it can be activated via </span></span><br><span class="line"><span class="built_in">source</span> activate env_name</span><br><span class="line"><span class="comment"># then the conda env would be shared</span></span><br><span class="line"><span class="comment"># other softwares should be installed before building the simg file</span></span><br><span class="line"></span><br><span class="line">u2cb <span class="comment"># can be used; note that creating image is done on u2cb server (not host machine), after defining (either via .def file or shell interactively) the simg can be downloaded to host</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># install virtual machine</span></span><br><span class="line"><span class="comment"># use VMWare Workstation Pro with latest Ubuntu, which is free via SJTU Software Center (No need to register or log in anything)</span></span><br><span class="line"><span class="comment"># the network connection problem (especially VPN problem)</span></span><br><span class="line"><span class="comment"># need to check VM's IP, within Host side (i.e. when using Windows, use ipconfig to see IPv4 address for VMnet8, if using NAT mode), then set this address to the Settings &gt; Network &gt; Network Proxy</span></span><br><span class="line"><span class="comment"># further the VPN (SSR), should check Option Settings &gt; Allow LAN</span></span><br></pre></td></tr></table></figure>

<p>The result is unsatisfactory, but these experience should be recorded for potential further usage.</p>
<h2 id="Duckie-town"><a href="#Duckie-town" class="headerlink" title="Duckie town"></a>Duckie town</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg <span class="comment"># to use wrapper.Moniter</span></span><br><span class="line"><span class="comment"># may further need</span></span><br><span class="line">conda install -c conda-forge ffmpeg</span><br><span class="line"><span class="comment"># details plz check: https://github.com/duckietown/gym-duckietown#ImportError-Library-GLU-not-found</span></span><br><span class="line"><span class="comment"># xvfb also required to run on headless server (the one without display device)</span></span><br><span class="line"><span class="comment"># however, the running speed using xvfb (virtual display buffer) on GPU nodes is even worse than using remote desktop with only cpu nodes, i.e. 1 fps vs. 5 fps</span></span><br><span class="line"><span class="comment"># the best solution is to make GPU nodes available for using remote desktop, which however is currently unavailable for SJTU HPC</span></span><br></pre></td></tr></table></figure>

<p>Next step, check if the efficiency increases or not, when removing the <code>wrapper.Moniter</code>; also, make training further autonomous. There is no need to record videos, the final result can be checked with a stand-alone program. </p>
<p>Guess: bottleneck for training is the CNN computing part, such that currently the fps is 5.</p>
<p>Current target is to successfully run MFRL.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/13/Duckietown/" data-id="ckckf6fcr0000agu53j8c9oqj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-RL" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/28/RL/" class="article-date">
  <time datetime="2020-06-28T08:03:46.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/28/RL/">RL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="PPO"><a href="#PPO" class="headerlink" title="PPO"></a>PPO</h2><p>loss contains three components, policy surrogate loss, value function loss and policy entropy loss (regularization term)</p>
<p>Default coefficient maybe not suitable. Another alternative way (instead of hyper-parameter tuning) is to normalize reward (To be investigated…)</p>
<h3 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h3><p>Why duckie bot performs the same action (turning left) when entropy is high?</p>
<ul>
<li>After checking the source code, I guess it’s not entropy’s problem, but the mean of policy’s distribution (last layer) gives a value out of range [-1, 1], so that it always clips to the same boundary value.</li>
<li>But another problem comes: why mean goes out of bound?</li>
</ul>
<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3><p>PPO Hyperparameters: <a href="https://docs.google.com/spreadsheets/d/1fNVfqgAifDWnTq-4izPPW_CVAUu9FXl3dWkqWIXz04o/edit#gid=0" target="_blank" rel="noopener">https://docs.google.com/spreadsheets/d/1fNVfqgAifDWnTq-4izPPW_CVAUu9FXl3dWkqWIXz04o/edit#gid=0</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/28/RL/" data-id="ckbyskf1c0000lgu566g05s59" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/05/python/" class="article-date">
  <time datetime="2020-06-05T09:14:28.000Z" itemprop="datePublished">2020-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/05/python/">python</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Efficency-of-numpy-and-list"><a href="#Efficency-of-numpy-and-list" class="headerlink" title="Efficency of numpy and list"></a>Efficency of numpy and list</h2><blockquote>
<p>np.append() copy all the data in the array every time, but list grow the capacity by a factor (1.125). list is fast, but memory usage is larger than array. You can use array module of the python standard library if you care about the memory.</p>
</blockquote>
<p>so </p>
<ul>
<li><p>for <em>running speed</em>, list is faster than numpy’s append, when doing <code>append</code></p>
<ul>
<li>which means, if the size of array is fixed beforehand, then <code>numpy</code> is of the best option.</li>
</ul>
</li>
<li><p>but for <em>memory</em>, list consumes more than numpy.</p>
</li>
</ul>
<p>The differences in both aspects are significant.</p>
<h2 id="Python-Dictionary"><a href="#Python-Dictionary" class="headerlink" title="Python Dictionary"></a>Python Dictionary</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict0 = &#123;&#125;</span><br><span class="line">dict1 = &#123;<span class="string">'Abc'</span>: <span class="number">102</span>&#125;</span><br><span class="line"><span class="comment"># to update dict0</span></span><br><span class="line">dict0.update(dict1)</span><br></pre></td></tr></table></figure>

<p>This operation is <code>in place</code></p>
<h2 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df.drop_duplicates()  <span class="comment"># not in-place</span></span><br><span class="line"></span><br><span class="line">newDf = oldDf.reset_index(drop=<span class="literal">True</span>)  <span class="comment"># re-index from 0</span></span><br><span class="line"></span><br><span class="line">newDf = df.concat([df1, df2], axis=<span class="number">1</span>)  <span class="comment"># combine two df side-by-side</span></span><br><span class="line"><span class="comment"># plz make sure there are the same rows and index names, also not the same column names</span></span><br><span class="line"><span class="comment"># otherwise google lol</span></span><br></pre></td></tr></table></figure>

<h2 id="FluentPython-Chapter-1"><a href="#FluentPython-Chapter-1" class="headerlink" title="FluentPython Chapter 1"></a>FluentPython Chapter 1</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">list.index()</span><br><span class="line">list concatenate using: +</span><br><span class="line">module collections.namedtuple(<span class="string">'name'</span>, [<span class="string">'property_filed1'</span>, <span class="string">'...'</span>])</span><br><span class="line">module random.choice(iterable_object):</span><br><span class="line">    iterable means: __getitem__() <span class="keyword">and</span> __len__() are defined</span><br><span class="line">dict can be define <span class="keyword">in</span> this way:</span><br><span class="line">    a = dict(diamond=<span class="number">3</span>, spades=<span class="string">'hello'</span>)</span><br><span class="line">    a[<span class="string">'diamond'</span>]</span><br><span class="line">function sorted(object, key=func)</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/05/python/" data-id="ckbyskf1z0001lgu5ds7i5rdv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/05/hello-world/" class="article-date">
  <time datetime="2020-06-05T08:59:14.168Z" itemprop="datePublished">2020-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/05/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/05/hello-world/" data-id="ckbyskf200002lgu531buce7v" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/13/Duckietown/">Duckie town &amp; Container</a>
          </li>
        
          <li>
            <a href="/2020/06/28/RL/">RL</a>
          </li>
        
          <li>
            <a href="/2020/06/05/python/">python</a>
          </li>
        
          <li>
            <a href="/2020/06/05/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>